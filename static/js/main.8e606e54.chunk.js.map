{"version":3,"sources":["components/MainContent/ManageContexts/ManageContexts.module.css","components/MainContent/Blocks/EditingBar/EditingBar.module.css","components/Menu/Menu.module.css","components/TopBar/TopBar.module.css","components/MainContent/MainContent.module.css","reducers/modeReducer.ts","reducers/contextsReducer.ts","reducers/blocksReducer.ts","reducers/subBlocksReducer.ts","store.ts","iconColors.ts","components/Menu/Menu.tsx","components/TopBar/TopBar.tsx","components/MainContent/DeletionModal.tsx","components/MainContent/Blocks/EditingBar/EditingBar.tsx","utils.ts","components/MainContent/Blocks/SubBlock.tsx","components/MainContent/Blocks/Block.tsx","components/MainContent/Blocks/Blocks.tsx","components/MainContent/About/About.tsx","components/MainContent/AlertModal.tsx","components/MainContent/ManageContexts/ContextItem.tsx","components/MainContent/ManageContexts/ManageContexts.tsx","components/MainContent/ImportExport/ImportExport.tsx","components/MainContent/MainContent.tsx","App.tsx","index.tsx"],"names":["module","exports","updateMode","settings","type","data","initialState","showEditIcons","currentContext","currentTheme","reducer","state","action","setContexts","contexts","updateContext","context","id","name","blockCount","subBlockCount","map","filter","setBlocks","blocks","addBlock","block","updateBlock","deleteBlock","setSubBlocks","subBlocks","addSubBlock","subBlock","updateSubBlock","deleteSubBlock","contents","isStriked","combineReducers","mode","modeReducer","contextsReducer","blocksReducer","subBlocksReducer","store","createStore","composeWithDevTools","useCustomSelector","createSelectorHook","iconColors","blue","gray","Menu","showMenu","setShowMenu","isDropdown","usingDropdown","useState","timeOutId","setTimeOutId","menu","useRef","dispatch","useDispatch","location","useLocation","useEffect","closeMenu","event","current","contains","target","document","addEventListener","removeEventListener","toggleTheme","Number","toggleEditIcons","handleContextChange","darkMode","containerThemeColor","style","iconThemeColor","menuIcon","icon","faCaretRight","color","currentContextIcon","className","faCircle","size","container","ref","onBlur","setTimeout","onFocus","clearTimeout","inner","title","onClick","faSun","faMoon","faCheckSquare","faSquare","c","i","pathname","undefined","to","path","item","TopBar","bars","prevState","faBars","test","DeletionModal","modalIsOpen","setModalIsOpen","handleDelete","topMessage","mainMessage","isOpen","overlayClassName","ariaHideApp","paddingBottom","EditingBar","isEditing","setIsEditing","handleEdit","handleSubmit","handleAddSubBlock","handleDeleteSubBlock","isLast","find","faCheck","faTimes","faEdit","faPlus","faTrash","swapItems","scopedItems","allItems","index","newScopedArr","newAllArr","updatedItem","newPlaceId","oldItem","validateAndSetState","imported","Error","newMode","newContexts","newBlocks","newSubBlocks","newContextCounts","newBlockCounts","forEach","missingCProperty","b","missingBProperty","hasOwnProperty","count","sb","missingSBProperty","contextId","SubBlock","subNameValue","setSubNameValue","contentsValue","setContentsValue","parsedContents","setParsedContents","subNameInput","currentBlockSubBlocks","findIndex","useLayoutEffect","focus","parseUrlFromContents","useCallback","urlMarkdownRegex","content","split","contentArr","titleArr","addingToTitle","length","startsWith","endsWith","push","join","toReplace","strArr","url","modifyingTitle","el","replace","handleReorder","dir","value","onChange","placeholder","faChevronUp","disabled","faChevronDown","dangerouslySetInnerHTML","__html","uuidv4","Block","nameValue","setNameValue","nameInput","currentContextBlocks","newBlockId","sub","Blocks","About","href","rel","AlertModal","message","ContextItem","handleOpenDeletionModal","contextErrorType","setContextErrorType","contextNameValue","setContextNameValue","contextNameInput","newArr","swapContexts","row","maxLength","error","ManageContexts","focusedContext","setFocusedContext","newCurrentContext","handleDeleteContext","newContextId","ImportExport","textareaValue","setTextareaValue","saveButtonDisabled","setSaveButtonDisabled","errorMessage","setErrorMessage","updateMessage","setUpdateMessage","saveButton","importElement","getElementById","JSON","stringify","handleFiles","reader","FileReader","readAsText","files","onload","result","click","currentDate","Date","day","getDate","month","getMonth","year","getFullYear","dateString","blob","Blob","saveAs","parse","SyntaxError","accept","display","aria-hidden","MainContent","separator","exact","App","setUsingDropdown","window","innerWidth","windowWidth","setWindowWidth","body","backgroundColor","modeData","localStorage","getItem","contextsData","blocksData","subBlocksData","newState","console","log","setItem","handleResize","basename","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.8e606e54.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ManageContexts_container__36BTI\",\"container-dark\":\"ManageContexts_container-dark__2jt78\",\"row\":\"ManageContexts_row__3hYo4\",\"row-dark\":\"ManageContexts_row-dark__eVAwz\",\"context-name\":\"ManageContexts_context-name__2mKG-\",\"new-context\":\"ManageContexts_new-context__jNq-h\",\"button-group\":\"ManageContexts_button-group__10KFd\",\"edit-mode\":\"ManageContexts_edit-mode__3oSIL\",\"edit-mode-dark\":\"ManageContexts_edit-mode-dark__3Ko5r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"EditingBar_container__2WDq6\",\"container-small\":\"EditingBar_container-small__I73QS\",\"container-dark\":\"EditingBar_container-dark__1EUBi\",\"inner-container\":\"EditingBar_inner-container__17poU\",\"icon-item\":\"EditingBar_icon-item__3hJvz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Menu_container__Rs1kq\",\"container-dark\":\"Menu_container-dark__3nNee\",\"inner\":\"Menu_inner__1lODf\",\"slide-out\":\"Menu_slide-out__33zV3\",\"current-context-icon\":\"Menu_current-context-icon__en9ZG\",\"menu-link\":\"Menu_menu-link__1WQ1O\",\"menu-link-dark\":\"Menu_menu-link-dark__2xvrZ\",\"behind-menu\":\"Menu_behind-menu__3ge-f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TopBar_container__3dLid\",\"bg-light\":\"TopBar_bg-light__3HtMS\",\"bg-dark\":\"TopBar_bg-dark__3p8ff\",\"link\":\"TopBar_link__2IXKY\",\"bars\":\"TopBar_bars__23ALz\",\"title\":\"TopBar_title__1B4TG\",\"title-dark\":\"TopBar_title-dark__3Nhts\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"separator\":\"MainContent_separator__3Q-Ye\",\"container\":\"MainContent_container__A0LE2\",\"container-dark\":\"MainContent_container-dark__WLH2v\",\"icon-group\":\"MainContent_icon-group__1lFnY\",\"icon-item\":\"MainContent_icon-item__3-_vM\",\"icon-chevron\":\"MainContent_icon-chevron__34RxQ\",\"edit-mode\":\"MainContent_edit-mode__3asVT\",\"edit-mode-dark\":\"MainContent_edit-mode-dark__iCQ1_\",\"importexport-container\":\"MainContent_importexport-container__3yKzK\",\"bg-light\":\"MainContent_bg-light__1TN-T\",\"bg-dark\":\"MainContent_bg-dark__3Nnfk\"};","export interface Mode {\r\n    showEditIcons: boolean\r\n    currentContext: string\r\n    currentTheme: number\r\n}\r\n\r\ntype Action = {\r\n    type: 'UPDATE_MODE'\r\n    data: Mode\r\n}\r\n\r\nconst updateMode = (settings: Mode): Action => {\r\n    return {\r\n        type: 'UPDATE_MODE',\r\n        data: settings\r\n    }\r\n}\r\n\r\nconst initialState: Mode = {\r\n    showEditIcons: true,\r\n    currentContext: '0',\r\n    currentTheme: 0\r\n}\r\n\r\nconst reducer = (state: Mode = initialState, action: Action): Mode => {\r\n    switch(action.type) {\r\n        case 'UPDATE_MODE':\r\n            return action.data\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport { updateMode }\r\nexport default reducer\r\n","export interface Context {\r\n    id: string | null\r\n    name: string\r\n    blockCount: number\r\n    subBlockCount: number\r\n}\r\n\r\ntype ContextIDOnly = Omit<Context, 'name' | 'blockCount' | 'subBlockCount'>\r\n\r\ntype Action = {\r\n    type: 'SET_CONTEXTS'\r\n    data: Context[] \r\n} | {\r\n    type: 'ADD_CONTEXT'\r\n    data: Context\r\n} | {\r\n    type: 'UPDATE_CONTEXT'\r\n    data: Context\r\n} | {\r\n    type: 'DELETE_CONTEXT'\r\n    data: ContextIDOnly\r\n}\r\n\r\nconst setContexts = (contexts: Context[]): Action => {\r\n    return {\r\n        type: 'SET_CONTEXTS',\r\n        data: contexts\r\n    }\r\n}\r\n\r\nconst addContext = (context: Context): Action => {\r\n    return {\r\n        type: 'ADD_CONTEXT',\r\n        data: context\r\n    }\r\n}\r\n\r\nconst updateContext = (context: Context): Action => {\r\n    return {\r\n        type: 'UPDATE_CONTEXT',\r\n        data: context\r\n    }\r\n}\r\n\r\nconst deleteContext = (context: ContextIDOnly): Action => {\r\n    return {\r\n        type: 'DELETE_CONTEXT',\r\n        data: context\r\n    }\r\n}\r\n\r\nconst initialState: Context[] = [\r\n    {\r\n        id: '0',\r\n        name: 'Default Context',\r\n        blockCount: 1,\r\n        subBlockCount: 1\r\n    }\r\n]\r\n\r\nconst reducer = (state: Context[] = initialState, action: Action): Context[] => {\r\n    switch(action.type) {\r\n        case 'SET_CONTEXTS':\r\n            return action.data\r\n        case 'ADD_CONTEXT':\r\n            return [\r\n                ...state,\r\n                action.data\r\n            ]\r\n        case 'UPDATE_CONTEXT':\r\n            return state.map(context => {\r\n                if (context.id === action.data.id) {\r\n                    return {\r\n                        ...context,\r\n                        name: action.data.name\r\n                    }\r\n                }\r\n                return context\r\n            })\r\n        case 'DELETE_CONTEXT':\r\n            return state.filter(context => context.id !== action.data.id)\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport { setContexts, addContext, updateContext, deleteContext }\r\nexport default reducer\r\n","export interface Block {\r\n    id: string | null\r\n    name: string\r\n    context: string // reference to id\r\n    subBlockCount: number\r\n}\r\n\r\ntype BlockIDOnly = Omit<Block, 'name' | 'context' | 'subBlockCount'>\r\n\r\ntype Action = {\r\n    type: 'SET_BLOCKS'\r\n    data: Block[]\r\n} | {\r\n    type: 'ADD_BLOCK'\r\n    data: Block\r\n} | {\r\n    type: 'UPDATE_BLOCK'\r\n    data: Block\r\n} | {\r\n    type: 'DELETE_BLOCK'\r\n    data: BlockIDOnly\r\n}\r\n\r\nconst setBlocks = (blocks: Block[]): Action => {\r\n    return {\r\n        type: 'SET_BLOCKS',\r\n        data: blocks\r\n    }\r\n}\r\n\r\nconst addBlock = (block: Block): Action => {\r\n    return {\r\n        type: 'ADD_BLOCK',\r\n        data: block\r\n    }\r\n}\r\n\r\nconst updateBlock = (block: Block): Action => {\r\n    return {\r\n        type: 'UPDATE_BLOCK',\r\n        data: block\r\n    }\r\n}\r\n\r\nconst deleteBlock = (block: BlockIDOnly): Action => {\r\n    return {\r\n        type: 'DELETE_BLOCK',\r\n        data: block\r\n    }\r\n}\r\n\r\nconst initialState: Block[] = [\r\n    {\r\n        id: '0',\r\n        name: 'Example Section',\r\n        context: '0',\r\n        subBlockCount: 1\r\n    }\r\n]\r\n\r\nconst reducer = (state: Block[] = initialState, action: Action): Block[] => {\r\n    switch(action.type) {\r\n        case 'SET_BLOCKS':\r\n            return action.data\r\n        case 'ADD_BLOCK':\r\n            return [\r\n                ...state,\r\n                action.data\r\n            ]\r\n        case 'UPDATE_BLOCK':\r\n            return state.map(block => {\r\n                if (block.id === action.data.id) {\r\n                    return {\r\n                        ...block,\r\n                        name: action.data.name\r\n                    }\r\n                }\r\n                return block\r\n            })\r\n        case 'DELETE_BLOCK':\r\n            return state.filter(block => block.id !== action.data.id)\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport { setBlocks, addBlock, updateBlock, deleteBlock }\r\nexport default reducer\r\n","export interface SubBlock {\r\n    id: string | null\r\n    name: string\r\n    block: string // reference to id\r\n    contents: string\r\n    isStriked: boolean\r\n}\r\n\r\ntype SubBlockIDOnly = Omit<SubBlock, 'name' | 'block' | 'contents' | 'isStriked'>\r\n\r\ntype Action = {\r\n    type: 'SET_SUBBLOCKS'\r\n    data: SubBlock[]\r\n} | {\r\n    type: 'ADD_SUBBLOCK'\r\n    data: SubBlock\r\n} | {\r\n    type: 'UPDATE_SUBBLOCK'\r\n    data: SubBlock\r\n} | {\r\n    type: 'DELETE_SUBBLOCK'\r\n    data: SubBlockIDOnly\r\n}\r\n\r\nconst setSubBlocks = (subBlocks: SubBlock[]): Action => {\r\n    return {\r\n        type: 'SET_SUBBLOCKS',\r\n        data: subBlocks\r\n    }\r\n}\r\n\r\nconst addSubBlock = (subBlock: SubBlock): Action => {\r\n    return {\r\n        type: 'ADD_SUBBLOCK',\r\n        data: subBlock\r\n    }\r\n}\r\n\r\nconst updateSubBlock = (subBlock: SubBlock): Action => {\r\n    return {\r\n        type: 'UPDATE_SUBBLOCK',\r\n        data: subBlock\r\n    }\r\n}\r\n\r\nconst deleteSubBlock = (subBlock: SubBlockIDOnly): Action => {\r\n    return {\r\n        type: 'DELETE_SUBBLOCK',\r\n        data: subBlock\r\n    }\r\n}\r\n\r\nconst initialState: SubBlock[] = [\r\n    {\r\n        id: '0',\r\n        name: 'Example Item',\r\n        block: '0',\r\n        contents: `Here, you can write notes for an item.\r\n            \\n[You can also add links that open to a new page](https://example.com) \r\n            \\nClick on an item title to strike it out, and click the edit or plus buttons to modify or add new content respectively.`,\r\n        isStriked: false\r\n    }\r\n]\r\n\r\nconst reducer = (state: SubBlock[] = initialState, action: Action): SubBlock[] => {\r\n    switch(action.type) {\r\n        case 'SET_SUBBLOCKS':\r\n            return action.data\r\n        case 'ADD_SUBBLOCK':\r\n            return [\r\n                ...state,\r\n                action.data\r\n            ]\r\n        case 'UPDATE_SUBBLOCK':\r\n            return state.map(subBlock => {\r\n                if (subBlock.id === action.data.id) {\r\n                    return {\r\n                        ...subBlock,\r\n                        name: action.data.name,\r\n                        contents: action.data.contents,\r\n                        isStriked: action.data.isStriked\r\n                    }\r\n                }\r\n                return subBlock\r\n            })\r\n        case 'DELETE_SUBBLOCK':\r\n            return state.filter(subBlock => subBlock.id !== action.data.id)\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport { setSubBlocks, addSubBlock, updateSubBlock, deleteSubBlock }\r\nexport default reducer\r\n","import { createStore, combineReducers } from 'redux'\r\nimport { createSelectorHook } from 'react-redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport modeReducer, { Mode } from './reducers/modeReducer'\r\nimport contextsReducer, { Context } from './reducers/contextsReducer'\r\nimport blocksReducer, { Block } from './reducers/blocksReducer'\r\nimport subBlocksReducer, { SubBlock } from './reducers/subBlocksReducer'\r\n\r\nexport interface RootState {\r\n    mode: Mode\r\n    contexts: Context[]\r\n    blocks: Block[]\r\n    subBlocks: SubBlock[]\r\n}\r\n\r\nconst reducer = combineReducers({\r\n    mode: modeReducer,\r\n    contexts: contextsReducer,\r\n    blocks: blocksReducer,\r\n    subBlocks: subBlocksReducer\r\n})\r\n\r\nconst store = createStore(reducer, composeWithDevTools())\r\n\r\n// A custom selector is used purely for the sake of typing with TypeScript\r\nconst useCustomSelector = createSelectorHook<RootState>()\r\n\r\nexport { useCustomSelector }\r\nexport default store\r\n","const iconColors = {\r\n    blue: {\r\n        '100': '#57869F',\r\n        '200': '#79bee4',\r\n        '300': '#5d8bb6'\r\n    },\r\n    gray: {\r\n        '100': '#A9B1BF'\r\n    }\r\n}\r\n\r\nexport default iconColors","import React, { useRef, useEffect, Dispatch, useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport style from './Menu.module.css'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faCaretRight, faCircle, faMoon, faSun, faSquare, faCheckSquare } from '@fortawesome/free-solid-svg-icons'\r\nimport { updateMode } from '../../reducers/modeReducer'\r\nimport { useCustomSelector } from '../../store'\r\nimport iconColors from '../../iconColors'\r\nimport { Link, useLocation } from 'react-router-dom'\r\n\r\ninterface Props {\r\n    showMenu?: boolean\r\n    setShowMenu?: Dispatch<boolean>\r\n    isDropdown: boolean\r\n    usingDropdown: boolean\r\n}\r\n\r\nconst Menu = ({showMenu, setShowMenu, isDropdown, usingDropdown}: Props) => {\r\n    const [timeOutId, setTimeOutId] = useState<number | null>(null)\r\n    const { contexts, mode } = useCustomSelector(state => state)\r\n    const menu = useRef<HTMLDivElement>(null)\r\n    const dispatch = useDispatch()\r\n    const location = useLocation()\r\n\r\n    useEffect(() => {\r\n        // Changing location closes the dropdown menu\r\n        if (isDropdown && setShowMenu) {\r\n            setShowMenu(false)\r\n        }\r\n    }, [location, setShowMenu, isDropdown])\r\n    \r\n    useEffect(() => {\r\n        // If the dropdown menu is open, close it when we click outside of it\r\n        const closeMenu = (event: any) => {\r\n            if (menu.current !== null\r\n                && !menu.current.contains(event.target)\r\n                && setShowMenu) {\r\n                setShowMenu(false)\r\n            }\r\n        }\r\n        if (showMenu && isDropdown) {\r\n            document.addEventListener('click', closeMenu)\r\n        }\r\n        return () => document.removeEventListener('click', closeMenu)\r\n    }, [showMenu, setShowMenu, isDropdown])\r\n    \r\n    // If this is the dropdown version of the component and we aren't using dropdown, \r\n    // or if the menu is meant to be hidden, don't render the component\r\n    if ((isDropdown && !usingDropdown) || (usingDropdown && !showMenu)) return null\r\n\r\n    const toggleTheme = (): void => {\r\n        dispatch(updateMode({...mode, currentTheme: Number(!mode.currentTheme)}))\r\n    }\r\n\r\n    const toggleEditIcons = (): void => {\r\n        dispatch(updateMode({...mode, showEditIcons: !mode.showEditIcons}))\r\n    }\r\n\r\n    const handleContextChange = (event: any): void => {\r\n        if (mode.currentContext !== event.target.id) {\r\n            dispatch(updateMode({ ...mode, currentContext: event.target.id }))\r\n        }\r\n    }\r\n\r\n    // Deal with closing the dropdown menu if we tab out to content beneath it\r\n    const handleOnBlur = (): void => {\r\n        if (isDropdown && setShowMenu) {\r\n            setTimeOutId(setTimeout(() => {\r\n                setShowMenu(false)\r\n            }))\r\n        }\r\n    }\r\n\r\n    const handleOnFocus = (): void => {\r\n        if (timeOutId !== null && isDropdown) {\r\n            clearTimeout(timeOutId)\r\n        }\r\n    }\r\n\r\n    const darkMode = mode.currentTheme === 1\r\n    const containerThemeColor = darkMode ? style['container-dark'] : style['container']\r\n    const iconThemeColor = darkMode ? iconColors.blue['200'] : iconColors.blue['100']\r\n\r\n    const mainMenuItems = [\r\n        { name: 'Manage Contexts', path: '/managecontexts' },\r\n        { name: 'Import / Export Data', path: '/importexport' },\r\n        { name: 'About', path: '/about' },\r\n    ]\r\n    const menuIcon = <FontAwesomeIcon icon={faCaretRight} color={iconThemeColor} />\r\n    const currentContextIcon = <span \r\n        className={style['current-context-icon']}>\r\n            <FontAwesomeIcon icon={faCircle} color={iconThemeColor} size='xs' />\r\n        </span>\r\n\r\n    return (\r\n        <>\r\n            <div id={style['behind-menu']}></div>\r\n            <div \r\n                id={style.container} \r\n                className={`${style['slide-out']} ${containerThemeColor}`} \r\n                ref={menu}\r\n                onBlur={handleOnBlur}\r\n                onFocus={handleOnFocus}>\r\n                <nav id={style.inner}>\r\n                    <ul>\r\n                        <li>\r\n                            { !darkMode ?\r\n                                <button name='dark mode' title='Dark mode' onClick={toggleTheme}>\r\n                                    <FontAwesomeIcon icon={faMoon} color={iconThemeColor} />{' '}Dark Mode\r\n                                </button> :\r\n                                <button name='light mode' title='Light mode' onClick={toggleTheme}>\r\n                                    <FontAwesomeIcon icon={faSun} color={iconThemeColor} />{' '}Light Mode\r\n                                </button> }\r\n                        </li>\r\n                        <li>\r\n                            { mode.showEditIcons ?\r\n                                <button name='hide edit icons' title='Hide edit icons' onClick={toggleEditIcons}>\r\n                                    <FontAwesomeIcon icon={faCheckSquare} color={iconThemeColor} />{' '}Show Edit Icons\r\n                                </button> :\r\n                                <button name='show edit icons' title='Show edit icons' onClick={toggleEditIcons}>\r\n                                    <FontAwesomeIcon icon={faSquare} color={iconThemeColor} />{' '}Show Edit Icons\r\n                                </button> }\r\n                        </li>\r\n                        <hr className={darkMode ? 'hr-dark' : ''} />\r\n                        { contexts\r\n                            .map((c, i) => <li key={i}>\r\n                                    {c.id === mode.currentContext ? currentContextIcon : menuIcon}{' '}\r\n                                    <span className={mode.currentContext === c.id && location.pathname === '' ? 'underline' : ''}>\r\n                                        <Link\r\n                                            id={c.id || undefined} \r\n                                            onClick={handleContextChange}\r\n                                            className={`${style['menu-link']} ${darkMode && style['menu-link-dark']}`}\r\n                                            to=''>\r\n                                                {c.name}\r\n                                        </Link>\r\n                                    </span>\r\n                                </li>) }\r\n                        <hr className={darkMode ? 'hr-dark' : ''} />\r\n                        { mainMenuItems\r\n                            .map((item, i) => \r\n                                <li key={i}>\r\n                                    {menuIcon}{' '}\r\n                                    <span className={location.pathname === item.path ? 'underline' : ''}>\r\n                                        <Link \r\n                                            className={`${style['menu-link']} ${darkMode && style['menu-link-dark']}`} \r\n                                            to={item.path}>\r\n                                                {item.name}\r\n                                        </Link>\r\n                                    </span>\r\n                                </li>) }\r\n                    </ul>\r\n                </nav>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Menu\r\n","import React, { useState } from 'react'\r\nimport style from './TopBar.module.css'\r\nimport { useCustomSelector } from '../../store'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faBars } from '@fortawesome/free-solid-svg-icons'\r\nimport iconColors from '../../iconColors'\r\nimport Menu from '../Menu/Menu'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst TopBar = ({usingDropdown}: { usingDropdown: boolean }) => {\r\n    const [showMenu, setShowMenu] = useState(false)\r\n    const mode = useCustomSelector(state => state.mode)\r\n\r\n    const toggleMenu = () => {\r\n        setShowMenu(prevState => !prevState)\r\n    }\r\n\r\n    const darkMode = mode.currentTheme === 1\r\n\r\n    return (\r\n        <>\r\n            <header id={style.container} className={`${darkMode ? style['bg-dark'] : style['bg-light']}`}>\r\n                <h1 id={style.title}>\r\n                    <Link className={darkMode ? style['title-dark'] : style.title} to=''>Organize</Link>\r\n                </h1>\r\n                <div id={style.bars}>\r\n                    <button name='menu' title='Menu' onClick={toggleMenu}>\r\n                        <FontAwesomeIcon icon={faBars} color={darkMode ? iconColors.blue['200'] : iconColors.blue['100']} />\r\n                    </button>\r\n                </div>\r\n            </header>\r\n            <div id={style.test}>\r\n                <Menu \r\n                    showMenu={showMenu} \r\n                    setShowMenu={setShowMenu} \r\n                    isDropdown={true} \r\n                    usingDropdown={usingDropdown} />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default TopBar\r\n","import React, { Dispatch } from 'react'\r\nimport Modal from 'react-modal'\r\nimport { useCustomSelector } from '../../store'\r\n\r\ninterface Props {\r\n    type: 'CONTEXT' | 'SUBBLOCK'\r\n    modalIsOpen: boolean\r\n    setModalIsOpen: Dispatch<boolean>\r\n    handleDelete: () => void\r\n    name?: string\r\n}\r\n\r\nconst DeletionModal = ({type, modalIsOpen, setModalIsOpen, handleDelete, name}: Props) => {\r\n    const mode = useCustomSelector(state => state.mode)\r\n    const darkMode = mode.currentTheme === 1\r\n\r\n    let topMessage = '', mainMessage = ''\r\n\r\n    switch (type) {\r\n        case 'CONTEXT':\r\n            topMessage = `Delete ${name}?`\r\n            mainMessage = `ALL sections and items within ${name} will be deleted.`\r\n            break\r\n        case 'SUBBLOCK':\r\n            topMessage = 'Delete this item?'\r\n            mainMessage = 'If it\\'s the only item left in a section, the section will be deleted.'\r\n            break\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={modalIsOpen}\r\n            className={`modal ${darkMode && 'modal-dark'}`}\r\n            overlayClassName={`modal-overlay ${darkMode && 'modal-overlay-dark'}`}\r\n            ariaHideApp={false} >\r\n            <div>\r\n                <div className={`bolder ${darkMode && 'bolder-dark'}`} style={{ paddingBottom: 10 }}>\r\n                    {topMessage}\r\n                </div>\r\n                {mainMessage}\r\n            </div>\r\n            <div className='modal-buttons'>\r\n                <button \r\n                    name='confirm delete'\r\n                    title='Confirm delete'\r\n                    className={`choice-button button-delete bolder ${darkMode && 'button-delete-dark bolder-dark'}`} \r\n                    onClick={handleDelete}>\r\n                    Delete\r\n                </button>\r\n                <button \r\n                    name='cancel'\r\n                    title='Cancel'\r\n                    className={`choice-button button-neutral bolder ${darkMode && 'button-neutral-dark bolder-dark'}`} \r\n                    onClick={() => setModalIsOpen(false)}>\r\n                    Cancel\r\n                </button>\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default DeletionModal\r\n","import React, { useState, Dispatch } from 'react'\r\nimport style from './EditingBar.module.css'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faEdit, faPlus, faTrash, faCheck, faTimes } from '@fortawesome/free-solid-svg-icons'\r\nimport iconColors from '../../../../iconColors'\r\nimport { useCustomSelector } from '../../../../store'\r\nimport DeletionModal from '../../DeletionModal'\r\n\r\ninterface Props {\r\n    isEditing: boolean\r\n    setIsEditing: Dispatch<boolean>\r\n    handleEdit: () => void\r\n    handleSubmit: () => void\r\n    handleAddSubBlock: () => void\r\n    handleDeleteSubBlock: () => void\r\n    isLast: boolean\r\n}\r\n\r\nconst EditingBar = ({ \r\n    isEditing, \r\n    setIsEditing, \r\n    handleEdit, \r\n    handleSubmit,\r\n    handleAddSubBlock,\r\n    handleDeleteSubBlock,\r\n    isLast }: Props) => {\r\n    const [modalIsOpen, setModalIsOpen] = useState(false)\r\n    const { mode, contexts } = useCustomSelector(state => state)\r\n\r\n    const context = contexts.find(c => c.id === mode.currentContext)\r\n    const darkMode = mode.currentTheme === 1\r\n    const iconThemeColor = darkMode ? iconColors.blue['200'] : iconColors.blue['100']\r\n\r\n    return (\r\n        <>\r\n            <DeletionModal\r\n                type='SUBBLOCK'\r\n                modalIsOpen={modalIsOpen}\r\n                setModalIsOpen={setModalIsOpen}\r\n                handleDelete={handleDeleteSubBlock} />\r\n            { mode.showEditIcons ?\r\n                <div id={style.container} className={ darkMode ?  style['container-dark'] : style.container }>\r\n                    { isEditing ?\r\n                    <>\r\n                        <button name='save changes' title='Save changes' id={style['inner-container']} onClick={handleSubmit}>\r\n                            <FontAwesomeIcon \r\n                                className={style['icon-item']} icon={faCheck} color={iconThemeColor} size='lg' />\r\n                            <span>Save Changes</span>\r\n                        </button>\r\n                        <button name='cancel' title='Cancel' onClick={() => setIsEditing(false)}>\r\n                            <FontAwesomeIcon \r\n                                className={style['icon-item']} icon={faTimes} color={iconThemeColor} size='lg' />\r\n                        </button>\r\n                    </>\r\n                    :<>\r\n                        <button name='edit item' title='Edit item' onClick={handleEdit}>\r\n                            <FontAwesomeIcon \r\n                                className={style['icon-item']} icon={faEdit} color={iconThemeColor} size='lg' />\r\n                        </button>\r\n                        { isLast &&\r\n                            <button name='new item' title='New item' onClick={handleAddSubBlock}>\r\n                                <FontAwesomeIcon \r\n                                    className={style['icon-item']} icon={faPlus} color={iconThemeColor} size='lg' />\r\n                            </button> }\r\n                        { (context && (context.blockCount > 1 || context.subBlockCount > 1)) &&\r\n                            <button name='delete item' title='Delete item' onClick={() => setModalIsOpen(true)}>\r\n                                <FontAwesomeIcon \r\n                                    className={style['icon-item']} icon={faTrash} color={iconThemeColor} size='lg' />\r\n                            </button> }\r\n                    </> }\r\n                </div> : \r\n                <div id={style['container-small']} className={ darkMode ?  style['container-dark'] : style.container } /> }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default EditingBar\r\n\r\n","import store, { RootState } from './store'\r\nimport { Mode, updateMode } from './reducers/modeReducer'\r\nimport { Context, setContexts } from './reducers/contextsReducer'\r\nimport { Block, setBlocks } from './reducers/blocksReducer'\r\nimport { SubBlock, setSubBlocks } from './reducers/subBlocksReducer'\r\n\r\n// Swap contexts above or below the given index, then return the new array\r\nconst swapContexts = (contexts: any[], index: number, type: 'UP' | 'DOWN'): any[] => {\r\n    const newArr = [...contexts]\r\n\r\n    switch(type) {\r\n        case 'UP':\r\n            [\r\n                newArr[index - 1], \r\n                newArr[index]\r\n            ] = [\r\n                newArr[index], \r\n                newArr[index - 1]\r\n            ]\r\n            break\r\n        case 'DOWN':\r\n            [\r\n                newArr[index + 1], \r\n                newArr[index]\r\n            ] = [\r\n                newArr[index], \r\n                newArr[index + 1]\r\n            ]\r\n            break\r\n    }\r\n\r\n    return newArr\r\n}\r\n\r\n// The purpose is the same as above, but this is for swapping items with a scoped relationship,\r\n// such as blocks and subblocks\r\nconst swapItems = (scopedItems: any[], allItems: any[], index: number, type: 'UP' | 'DOWN'): any[] => {\r\n    const newScopedArr = [...scopedItems]\r\n    const newAllArr = [...allItems]\r\n    const updatedItem = { ...scopedItems[index], newPlaceId: null }\r\n    let oldItem: any = null\r\n\r\n    switch(type) {\r\n        case 'UP':\r\n            oldItem = { ...newScopedArr[index - 1], newPlaceId: newScopedArr[index].id }\r\n            updatedItem.newPlaceId = newScopedArr[index - 1].id\r\n            break\r\n        case 'DOWN':\r\n            oldItem = { ...newScopedArr[index + 1], newPlaceId: newScopedArr[index].id }\r\n            updatedItem.newPlaceId = newScopedArr[index + 1].id\r\n            break\r\n    }\r\n\r\n    return newAllArr.map(item => {\r\n        if (item.id === updatedItem.newPlaceId) {\r\n            delete updatedItem.newPlaceId\r\n            return updatedItem\r\n        } else if (item.id === oldItem.newPlaceId) {\r\n            delete oldItem.newPlaceId\r\n            return oldItem\r\n        }\r\n        return item\r\n    })\r\n}\r\n\r\ninterface BlockCounter {\r\n    [id: string]: {\r\n        context?: string\r\n        blockCount?: number\r\n        subBlockCount: number\r\n    }\r\n}\r\n\r\n// Set state from external sources such as local storage or imports\r\nconst validateAndSetState = ({ mode, contexts, blocks, subBlocks }: RootState, imported: boolean): void => {\r\n    if (mode && contexts && blocks && subBlocks) {\r\n        // Handle mode\r\n        const { showEditIcons, currentContext, currentTheme } = mode\r\n        const newMode: Mode = {\r\n            showEditIcons: showEditIcons,\r\n            currentContext: (currentContext || '0'),\r\n            currentTheme: (Number(currentTheme) || 0)\r\n        }\r\n\r\n        const newContexts: Context[] = [...contexts]\r\n        const newBlocks: Block[] = [...blocks]\r\n        const newSubBlocks: SubBlock[] = [...subBlocks]\r\n\r\n        // Extra validation when data is imported by the user\r\n        if (imported) {\r\n            // Validate properties, and correctly set block/subblock counts\r\n            const newContextCounts: BlockCounter = {}\r\n            const newBlockCounts: BlockCounter = {}\r\n\r\n            newContexts.forEach(c => {\r\n                // Validation\r\n                const { id, name } = c\r\n                let missingCProperty = null\r\n                if (!id || typeof id !== 'string') missingCProperty = 'ID'\r\n                if (!name || typeof name !== 'string') missingCProperty = 'name'\r\n\r\n                if (missingCProperty !== null) {\r\n                    throw new Error(`A context's ${missingCProperty} is missing or in the wrong format`)\r\n                }\r\n\r\n                // Counting\r\n                newContextCounts[c.id as string] = { blockCount: 0, subBlockCount: 0 }\r\n            })\r\n\r\n            newBlocks.forEach(b => {\r\n                // Validation\r\n                const { id, name, context } = b\r\n                let missingBProperty = null\r\n                if (!id || typeof id !== 'string') missingBProperty = 'ID'\r\n                if (!name || typeof name !== 'string') missingBProperty = 'name'\r\n                if (!context || typeof context !== 'string') missingBProperty = 'context'\r\n\r\n                if (missingBProperty !== null) {\r\n                    throw new Error(`A block's ${missingBProperty} is missing or in the wrong format`)\r\n                }\r\n\r\n                // Counting\r\n                if (newContextCounts[b.context]?.hasOwnProperty('blockCount')) {\r\n                    const count = newContextCounts[b.context].blockCount as number\r\n                    newContextCounts[b.context].blockCount = count + 1\r\n                }\r\n\r\n                newBlockCounts[b.id as string] = { context: b.context, subBlockCount: 0 }\r\n            })\r\n\r\n            newSubBlocks.forEach(sb => {\r\n                // Validation\r\n                const { id, name, block, contents, isStriked } = sb\r\n                let missingSBProperty = null\r\n                if (!id || typeof id !== 'string') missingSBProperty = 'ID'\r\n                if (!name || typeof name !== 'string') missingSBProperty = 'name'\r\n                if (!block || typeof block !== 'string') missingSBProperty = 'block'\r\n\r\n                if (missingSBProperty !== null) {\r\n                    throw new Error(`A subblock's ${missingSBProperty} is missing or in the wrong format`)\r\n                }\r\n\r\n                if (!contents || typeof contents !== 'string') sb.contents = ''\r\n                if (!isStriked || typeof isStriked !== 'boolean') sb.isStriked = false\r\n\r\n                // Counting\r\n                if (newBlockCounts[sb.block]?.hasOwnProperty('subBlockCount')) {\r\n                    const count = newBlockCounts[sb.block].subBlockCount as number\r\n                    newBlockCounts[sb.block].subBlockCount = count + 1\r\n                }\r\n                if (newBlockCounts[sb.block]?.context) {\r\n                    const contextId = newBlockCounts[sb.block].context as string\r\n                    const count = newContextCounts[contextId].subBlockCount as number\r\n                    newContextCounts[contextId].subBlockCount = count + 1\r\n                }\r\n            })\r\n\r\n            // Set counts\r\n            newContexts.forEach(c => {\r\n                if (c.id) {\r\n                    if (newContextCounts[c.id].blockCount === 0 || newContextCounts[c.id].subBlockCount === 0) {\r\n                        throw new Error('Contexts must have at least one block and one subblock')\r\n                    }\r\n\r\n                    c.blockCount = newContextCounts[c.id].blockCount as number\r\n                    c.subBlockCount = newContextCounts[c.id].subBlockCount as number\r\n                }\r\n            })\r\n            newBlocks.forEach(b => {\r\n                if (b.id) {\r\n                    b.subBlockCount = newBlockCounts[b.id].subBlockCount as number\r\n                }\r\n            })\r\n        }\r\n        \r\n        store.dispatch(updateMode(newMode))\r\n        store.dispatch(setContexts(newContexts))\r\n        store.dispatch(setBlocks(newBlocks))\r\n        store.dispatch(setSubBlocks(newSubBlocks))\r\n    } else {\r\n        throw new Error('Unable to save, data is missing')\r\n    }\r\n}\r\n\r\nexport { swapContexts, swapItems, validateAndSetState }\r\n","import React, { useState, useRef, useLayoutEffect, useCallback } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useCustomSelector } from '../../../store'\r\nimport { updateContext } from '../../../reducers/contextsReducer'\r\nimport { SubBlock as SubBlockData,\r\n    updateSubBlock, addSubBlock, deleteSubBlock, setSubBlocks } from '../../../reducers/subBlocksReducer'\r\nimport { updateBlock, deleteBlock } from '../../../reducers/blocksReducer'\r\nimport TextareaAutosize from 'react-textarea-autosize'\r\nimport EditingBar from './EditingBar/EditingBar'\r\nimport style from '../MainContent.module.css'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronUp, faChevronDown } from '@fortawesome/free-solid-svg-icons'\r\nimport iconColors from '../../../iconColors'\r\nimport { v4 as uuidv4 } from 'uuid'\r\nimport { swapItems } from '../../../utils'\r\n\r\n\r\nconst SubBlock = ({subBlock, isLast}: { subBlock: SubBlockData, isLast: boolean }) => {\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    const [subNameValue, setSubNameValue] = useState('')\r\n    const [contentsValue, setContentsValue] = useState(subBlock.contents)\r\n    const [parsedContents, setParsedContents] = useState(subBlock.contents)\r\n    const subNameInput = useRef<HTMLInputElement>(null)\r\n    const { contexts, blocks, subBlocks, mode } = useCustomSelector(state => state)\r\n    const currentBlockSubBlocks = subBlocks.filter(sb => sb.block === subBlock.block)\r\n    const index = currentBlockSubBlocks.findIndex(sb => sb.id === subBlock.id)\r\n    const dispatch = useDispatch()\r\n\r\n    const darkMode = mode.currentTheme === 1\r\n    const iconThemeColor = darkMode ? iconColors.blue['300'] : iconColors.gray['100']\r\n\r\n    useLayoutEffect(() => {\r\n        if (subNameInput.current !== null && isEditing) {\r\n            subNameInput.current.focus()\r\n        }\r\n    }, [isEditing])\r\n\r\n    const parseUrlFromContents = useCallback((contents: string) => {\r\n        // Match the pattern: [title](https://example.com)\r\n        const urlMarkdownRegex = /^\\[([\\w\\s\\d\\W]+)\\]\\((https?:\\/\\/[\\w\\d-./?=#]+)\\)$/\r\n        // Split at spaces and new lines\r\n        let content = contents.split(/[\\s]+/)\r\n\r\n        // Remerge elements between [] brackets\r\n        const contentArr = []\r\n        let titleArr = []\r\n        let addingToTitle = false\r\n\r\n        for (let i = 0; i < content.length; i++) {\r\n            // Handle no spaces\r\n            if (content[i].startsWith('[') && content[i].endsWith(')')) {\r\n                contentArr.push(content[i])\r\n                continue\r\n            }\r\n\r\n            // Handle spaces\r\n            if (content[i].startsWith('[')) {\r\n                addingToTitle = true\r\n                titleArr.push(content[i])\r\n                continue\r\n            } else if (content[i].endsWith(')')) {\r\n                addingToTitle = false\r\n                titleArr.push(content[i])\r\n                contentArr.push(titleArr.join(' '))\r\n                titleArr = []\r\n                continue\r\n            }\r\n\r\n            if (addingToTitle) {\r\n                titleArr.push(content[i])\r\n            } else {\r\n                contentArr.push(content[i])\r\n            }\r\n        }\r\n\r\n        // Format and replace links\r\n        let toReplace: string[][] = []\r\n\r\n        contentArr.forEach(c => {\r\n            if (urlMarkdownRegex.test(c)) {\r\n                const strArr = c.split('')\r\n                let title = [], url = []\r\n                let modifyingTitle = true\r\n\r\n                for (let i = 1; i < strArr.length - 1; i++) {\r\n                    if (strArr[i] === ']') {\r\n                        modifyingTitle = false\r\n                        i++\r\n                        continue\r\n                    }\r\n\r\n                    if (modifyingTitle) {\r\n                        title.push(strArr[i])\r\n                    } else {\r\n                        url.push(strArr[i])\r\n                    }\r\n                }\r\n                toReplace.push([c, `<a href='${url.join('')}' target='_blank' ${darkMode && 'class=\"a-dark\"'} rel='noreferrer noopener'>${title.join('')}</a>`])\r\n            }\r\n        })\r\n\r\n        toReplace.forEach(el => {\r\n            contents = contents.replace(el[0], el[1])\r\n        })\r\n\r\n        setParsedContents(contents)\r\n    }, [darkMode])\r\n\r\n    useLayoutEffect(() => {\r\n        parseUrlFromContents(subBlock.contents)\r\n    }, [subBlock.contents, mode, parseUrlFromContents])\r\n\r\n    const handleEdit = (): void => {\r\n        setIsEditing(true)\r\n        setSubNameValue(subBlock.name)\r\n        setContentsValue(subBlock.contents)\r\n    }\r\n\r\n    const handleSubmit = (): void => {\r\n        setIsEditing(false)\r\n        dispatch(updateSubBlock({\r\n            ...subBlock,\r\n            name: subNameValue,\r\n            contents: contentsValue,\r\n        }))\r\n        parseUrlFromContents(contentsValue)\r\n    }\r\n\r\n    const handleAddSubBlock = (): void => {\r\n        const block = blocks.find(b => b.id === subBlock.block)\r\n        const context = contexts.find(c => c.id === block?.context)\r\n        if (block && context) {\r\n            context.subBlockCount++\r\n            block.subBlockCount++\r\n            dispatch(updateContext(context))\r\n            dispatch(updateBlock(block))\r\n            dispatch(addSubBlock({\r\n                id: uuidv4(),\r\n                name: 'New Item',\r\n                block: subBlock.block,\r\n                contents: '',\r\n                isStriked: false\r\n            }))\r\n        }\r\n    }\r\n\r\n    const handleDeleteSubBlock = (): void => {\r\n        const block = blocks.find(b => b.id === subBlock.block)\r\n        const context = contexts.find(c => c.id === block?.context)\r\n\r\n        if (block && context) {\r\n            block.subBlockCount--\r\n            dispatch(deleteSubBlock({ id: subBlock.id }))\r\n\r\n            if (block.subBlockCount === 0) {\r\n                context.blockCount--\r\n                dispatch(deleteBlock({ id: block.id }))\r\n            } else {\r\n                dispatch(updateBlock(block))\r\n            }\r\n\r\n            context.subBlockCount--\r\n            dispatch(updateContext(context))\r\n        }\r\n    }\r\n\r\n    const handleToggleStriked = (): void => {\r\n        dispatch(updateSubBlock({ ...subBlock, isStriked: !subBlock.isStriked }))\r\n    }\r\n\r\n    const handleReorder = (dir: 'UP' | 'DOWN'): void => {\r\n        const newSubBlocks = swapItems(currentBlockSubBlocks, subBlocks, index, dir)\r\n        dispatch(setSubBlocks(newSubBlocks))\r\n    }\r\n\r\n    return (\r\n        <section>\r\n            { isEditing ?\r\n                <>\r\n                    <h2 className='fullwidth'>\r\n                        <input\r\n                            className={`${style['edit-mode']} ${darkMode && style['edit-mode-dark']} h2-input ${darkMode ? 'input-dark' : ''}`}\r\n                            name='item name'\r\n                            title='Item name'\r\n                            ref={subNameInput}\r\n                            value={subNameValue}\r\n                            onChange={({target}) => setSubNameValue(target.value)}\r\n                            placeholder='Subtitle' />\r\n                    </h2>\r\n                    <TextareaAutosize \r\n                        className={`${style['edit-mode']} ${darkMode ? `input-dark ${style['edit-mode-dark']}` : ''}`}\r\n                        name='notes'\r\n                        title='Notes'\r\n                        value={contentsValue}\r\n                        onChange={({target}) => setContentsValue(target.value)}\r\n                        placeholder='Notes' />\r\n                    <p className={`info ${darkMode && 'info-dark'}`}>\r\n                        Links can be added by using <code>[title](https://example.com)</code>\r\n                    </p>\r\n                </>\r\n                : <>\r\n                    <h2>\r\n                        <button \r\n                            onClick={handleToggleStriked}\r\n                            className={`strikable ${subBlock.isStriked && 'striked'}`}\r\n                            name={subBlock.isStriked ? 'striked item' : 'unstriked item'}\r\n                            title='Toggle striked'>\r\n                            {subBlock.name}\r\n                        </button>\r\n                    </h2>\r\n                    { mode.showEditIcons &&\r\n                        <span className={style['icon-group']}>\r\n                            { (index > 0 || index < currentBlockSubBlocks.length - 1) &&\r\n                                <>\r\n                                { index > 0 ?\r\n                                    <button name='move item up' title='Item up' className={`${style['icon-item']} ${style['icon-chevron']}`} \r\n                                        onClick={() => handleReorder('UP')}>\r\n                                        <FontAwesomeIcon icon={faChevronUp} color={iconThemeColor} size='lg' />\r\n                                    </button> :\r\n                                    <button name='move item up' className={`${style['icon-item']} ${style['icon-chevron']} disabled`} disabled>\r\n                                        <FontAwesomeIcon icon={faChevronUp} color={iconThemeColor} size='lg' />\r\n                                    </button> }\r\n                                { index < currentBlockSubBlocks.length - 1 ?\r\n                                    <button name='move item down' title='Item down' className={`${style['icon-item']} ${style['icon-chevron']}`} \r\n                                        onClick={() => handleReorder('DOWN')}>\r\n                                        <FontAwesomeIcon icon={faChevronDown} color={iconThemeColor} size='lg' />\r\n                                    </button> :\r\n                                    <button name='move item down' className={`${style['icon-item']} ${style['icon-chevron']} disabled`} disabled>\r\n                                        <FontAwesomeIcon icon={faChevronDown} color={iconThemeColor} size='lg' />\r\n                                    </button> }\r\n                                </> }\r\n                        </span> }\r\n                    {\r\n                        // It's okay, users can only see their own input :)\r\n                    }\r\n                    { contentsValue &&\r\n                        <p dangerouslySetInnerHTML={{ __html: parsedContents }} /> }\r\n                </> }\r\n            <EditingBar \r\n                isEditing={isEditing} \r\n                setIsEditing={setIsEditing} \r\n                handleEdit={handleEdit} \r\n                handleSubmit={handleSubmit}\r\n                handleAddSubBlock={handleAddSubBlock}\r\n                handleDeleteSubBlock={handleDeleteSubBlock}\r\n                isLast={isLast} />\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default SubBlock\r\n","import React, { useState, useRef, useLayoutEffect } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useCustomSelector } from '../../../store'\r\nimport { Block as BlockData, updateBlock, addBlock, setBlocks } from '../../../reducers/blocksReducer'\r\nimport { addSubBlock } from '../../../reducers/subBlocksReducer'\r\nimport { updateContext } from '../../../reducers/contextsReducer'\r\nimport SubBlock from './SubBlock'\r\nimport style from '../MainContent.module.css'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faEdit, faPlus, faCheck, faTimes, faChevronUp, faChevronDown } from '@fortawesome/free-solid-svg-icons'\r\nimport iconColors from '../../../iconColors'\r\nimport { v4 as uuidv4 } from 'uuid'\r\nimport { swapItems } from '../../../utils'\r\n\r\nconst Block = ({ block, isLast }: { block: BlockData, isLast: boolean }) => {\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    const [nameValue, setNameValue] = useState('')\r\n    const nameInput = useRef<HTMLInputElement>(null)\r\n    const { blocks, subBlocks, contexts, mode } = useCustomSelector(state => state)\r\n    const currentContextBlocks = blocks.filter(b => b.context === mode.currentContext)\r\n    const index = currentContextBlocks.findIndex(b => b.id === block.id)\r\n    const dispatch = useDispatch()\r\n\r\n    useLayoutEffect(() => {\r\n        if (nameInput.current !== null && isEditing) {\r\n            nameInput.current.focus()\r\n        }\r\n    }, [isEditing])\r\n\r\n    const handleEdit = (): void => {\r\n        setIsEditing(true)\r\n        setNameValue(block.name)\r\n    }\r\n\r\n    const handleSubmit = (): void => {\r\n        setIsEditing(false)\r\n        dispatch(updateBlock({ ...block, name: nameValue }))\r\n    }\r\n\r\n    const handleAddBlock = (): void => {\r\n        const newBlockId = uuidv4()\r\n        const context = contexts.find(c => c.id === block.context)\r\n        if (context) {\r\n            context.blockCount++\r\n            context.subBlockCount++\r\n            dispatch(updateContext(context))\r\n            dispatch(addBlock({\r\n                id: newBlockId,\r\n                name: 'New Section',\r\n                context: block.context,\r\n                subBlockCount: 1\r\n            }))\r\n            dispatch(addSubBlock({\r\n                id: uuidv4(),\r\n                name: 'New Item',\r\n                block: newBlockId,\r\n                contents: '',\r\n                isStriked: false\r\n            }))\r\n        }\r\n    }\r\n\r\n    const handleReorder = (dir: 'UP' | 'DOWN'): void => {\r\n        const newBlocks = swapItems(currentContextBlocks, blocks, index, dir)\r\n        dispatch(setBlocks(newBlocks))\r\n    }\r\n\r\n    const darkMode = mode.currentTheme === 1\r\n    const iconThemeColor = darkMode ? iconColors.blue['300'] : iconColors.gray['100']\r\n\r\n    return (\r\n        <section>\r\n            { isEditing ?\r\n                <h1 className='fullwidth'>\r\n                    <input \r\n                        className={`${style['edit-mode']} ${darkMode && style['edit-mode-dark']} h1-input ${darkMode ? 'input-dark' : ''}`}\r\n                        name='section name'\r\n                        title='Section name'\r\n                        ref={nameInput}\r\n                        value={nameValue} \r\n                        onChange={({target}) => setNameValue(target.value)}  \r\n                        placeholder='Title' />\r\n                </h1>\r\n                : <h1>{block.name}</h1> }\r\n            { mode.showEditIcons &&\r\n                <span className={style['icon-group']}>\r\n                    { isEditing ?\r\n                        <>\r\n                            <button name='save changes' title='Save changes' className={style['icon-item']} \r\n                                onClick={handleSubmit}>\r\n                                <FontAwesomeIcon icon={faCheck} color={iconThemeColor} size='lg' />\r\n                            </button>\r\n                            <button name='cancel' title='Cancel' className={style['icon-item']} \r\n                                onClick={() => setIsEditing(false)}>\r\n                                <FontAwesomeIcon icon={faTimes} color={iconThemeColor} size='lg' />\r\n                            </button>\r\n                        </>\r\n                        :<>\r\n                            { (index > 0 || index < currentContextBlocks.length - 1) && \r\n                                <>\r\n                                    { index > 0 ? \r\n                                    <button name='move section up' title='Section up' className={`${style['icon-item']} ${style['icon-chevron']}`} \r\n                                        onClick={() => handleReorder('UP')}>\r\n                                        <FontAwesomeIcon icon={faChevronUp} color={iconThemeColor} size='lg' />\r\n                                    </button> :\r\n                                    <button name='move section up' className={`${style['icon-item']} ${style['icon-chevron']} disabled`} disabled>\r\n                                        <FontAwesomeIcon icon={faChevronUp} color={iconThemeColor} size='lg' />\r\n                                    </button> }\r\n                                { index < currentContextBlocks.length - 1 ?\r\n                                    <button name='move section down' title='Section down' className={`${style['icon-item']} ${style['icon-chevron']}`} \r\n                                        onClick={() => handleReorder('DOWN')}>\r\n                                        <FontAwesomeIcon icon={faChevronDown} color={iconThemeColor} size='lg' />\r\n                                    </button> :\r\n                                    <button name='move section down' className={`${style['icon-item']} ${style['icon-chevron']} disabled`} disabled>\r\n                                        <FontAwesomeIcon icon={faChevronDown} color={iconThemeColor} size='lg' />\r\n                                    </button> }\r\n                                </> }\r\n                            <button name='edit section name' title='Edit section name' className={style['icon-item']} \r\n                                onClick={handleEdit}>\r\n                                <FontAwesomeIcon icon={faEdit} color={iconThemeColor} size='lg' />\r\n                            </button>\r\n                            { isLast &&\r\n                                <button name='new section' title='New section' className={style['icon-item']} \r\n                                    onClick={handleAddBlock}>\r\n                                    <FontAwesomeIcon icon={faPlus} color={iconThemeColor} size='lg' />\r\n                                </button> }\r\n                        </> }\r\n                </span> }\r\n            { subBlocks\r\n                .filter(sub => sub.block === block.id)\r\n                .map((sub, i) => <SubBlock \r\n                    key={sub.id} \r\n                    subBlock={sub}\r\n                    isLast={i === block.subBlockCount - 1} />) }\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Block\r\n","import React, { useEffect } from 'react'\r\nimport { useCustomSelector } from '../../../store'\r\nimport Block from './Block'\r\n\r\nconst Blocks = () => {\r\n    const { mode, blocks, contexts } = useCustomSelector(state => state)\r\n    const currentContext = contexts.find(c => c.id === mode.currentContext)\r\n\r\n    useEffect(() => {\r\n        if (currentContext) {\r\n            document.title = `Organize - ${currentContext.name}`\r\n        } else {\r\n            document.title = 'Organize'\r\n        }\r\n    }, [currentContext])\r\n\r\n    return (\r\n        <>\r\n            { blocks\r\n                .filter(block => block.context === mode.currentContext)\r\n                .map((block, i) => {\r\n                    return <Block \r\n                        key={block.id} \r\n                        block={block}\r\n                        isLast={currentContext === undefined || i === currentContext.blockCount - 1} />\r\n                }) }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Blocks\r\n","import React, { useEffect } from 'react'\r\nimport { useCustomSelector } from '../../../store'\r\n\r\nconst About = () => {\r\n    const mode = useCustomSelector(state => state.mode)\r\n    const darkMode = mode.currentTheme === 1\r\n\r\n    useEffect(() => {\r\n        document.title = 'Organize - About Page'\r\n    }, [])\r\n\r\n    return (\r\n        <section>\r\n            <h1>About</h1>\r\n            <p>\r\n                This web application can be used to organize just about anything. <br />\r\n                You can keep notes, to-do items, goals, grocery lists, links, and any other musings\r\n                you might have.\r\n            </p>\r\n            <p>\r\n                You can also create contexts (separate pages which are listed in the menu for easy access).\r\n                Within those, you can create new sections and add items containing further writing\r\n                and/or links. What you do with this space is up to you. Enjoy!\r\n            </p>\r\n            <p>\r\n                Find the app on {' '}\r\n                <a \r\n                    href='https://github.com/wqgc/organize-app' \r\n                    target='_blank' \r\n                    rel='noreferrer noopener'\r\n                    className={darkMode ? 'a-dark' : ''}>\r\n                    GitHub.\r\n                </a>\r\n            </p>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default About\r\n","import React, { Dispatch } from 'react'\r\nimport Modal from 'react-modal'\r\nimport { useCustomSelector } from '../../store'\r\n\r\ninterface Props {\r\n    type: string | 'MIN_CONTEXT_NAME_LENGTH' | 'MAX_CONTEXT_NAME_LENGTH'\r\n    modalIsOpen: boolean\r\n    setModalIsOpen: Dispatch<boolean>\r\n}\r\n\r\nconst AlertModal = ({type, modalIsOpen, setModalIsOpen}: Props) => {\r\n    const mode = useCustomSelector(state => state.mode)\r\n    const darkMode = mode.currentTheme === 1\r\n\r\n    let message = ''\r\n\r\n    switch (type) {\r\n        case 'MIN_CONTEXT_NAME_LENGTH':\r\n            message = 'Context names must contain at least 1 character.'\r\n            break\r\n        case 'MAX_CONTEXT_NAME_LENGTH':\r\n            message = 'Context names must be no longer than 28 characters.'\r\n            break\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={modalIsOpen}\r\n            className={`modal ${darkMode && 'modal-dark'} modal-smaller`}\r\n            overlayClassName={`modal-overlay ${darkMode && 'modal-overlay-dark'}`}\r\n            ariaHideApp={false} >\r\n            <div>\r\n                {message}\r\n            </div>\r\n            <div className='modal-buttons modal-buttons-center'>\r\n                <button \r\n                    name='ok'\r\n                    title='Ok'\r\n                    className={`choice-button button-neutral bolder ${darkMode && 'button-neutral-dark bolder-dark'}`} \r\n                    onClick={() => setModalIsOpen(false)}>\r\n                    Okay\r\n                </button>\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default AlertModal\r\n","import React, { useState, useRef, useLayoutEffect } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport style from './ManageContexts.module.css'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faEdit, faTrash, faCheck, faTimes, faChevronUp, faChevronDown } from '@fortawesome/free-solid-svg-icons'\r\nimport { Context, updateContext, setContexts } from '../../../reducers/contextsReducer'\r\nimport { useCustomSelector } from '../../../store'\r\nimport AlertModal from '../AlertModal'\r\nimport { swapContexts } from '../../../utils'\r\n\r\ninterface Props {\r\n    context: Context\r\n    index: number\r\n    darkMode: boolean\r\n    iconThemeColor: string\r\n    handleOpenDeletionModal: (context: Context) => void\r\n}\r\n\r\nconst ContextItem = ({ context, index, darkMode, iconThemeColor, handleOpenDeletionModal }: Props) => {\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    const [contextErrorType, setContextErrorType] = useState('')\r\n    const [contextNameValue, setContextNameValue] = useState('')\r\n    const [modalIsOpen, setModalIsOpen] = useState(false)\r\n    const contextNameInput = useRef<HTMLInputElement>(null)\r\n\r\n    const contexts = useCustomSelector(state => state.contexts)\r\n    const dispatch = useDispatch()\r\n\r\n    useLayoutEffect(() => {\r\n        if (contextNameInput.current !== null && isEditing) {\r\n            contextNameInput.current.focus()\r\n        }\r\n    }, [isEditing])\r\n\r\n    const handleEdit = (): void => {\r\n        setIsEditing(true)\r\n        setContextNameValue(context.name)\r\n    }\r\n\r\n    const handleSubmit = (): void => {\r\n        let error = ''\r\n\r\n        if (contextNameValue.length < 1) {\r\n            error = 'MIN_CONTEXT_NAME_LENGTH'\r\n        } else if (contextNameValue.length > 28) {\r\n            error = 'MAX_CONTEXT_NAME_LENGTH'\r\n        }\r\n\r\n        if (error) {\r\n            setContextErrorType(error)\r\n            setModalIsOpen(true)\r\n        } else {\r\n            setIsEditing(false)\r\n            dispatch(updateContext({ ...context, name: contextNameValue }))\r\n        }\r\n    }\r\n\r\n    const handleReorder = (dir: 'UP' | 'DOWN'): void => {\r\n        const newContexts = swapContexts(contexts, index, dir)\r\n        dispatch(setContexts(newContexts))\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <AlertModal\r\n                type={contextErrorType}\r\n                modalIsOpen={modalIsOpen}\r\n                setModalIsOpen={setModalIsOpen} />\r\n            <div className={`${style.row} ${darkMode && style['row-dark']}`}>\r\n                { isEditing ?\r\n                    <input\r\n                        className={`${style['edit-mode']} ${darkMode && style['edit-mode-dark']} ${darkMode ? 'input-dark' : ''}`}\r\n                        name='context name'\r\n                        title='Context Name'\r\n                        ref={contextNameInput}\r\n                        value={contextNameValue}\r\n                        onChange={({target}) => setContextNameValue(target.value)}\r\n                        placeholder='Context Name'\r\n                        maxLength={28} />\r\n                    : <span className={style['context-name']}>{context.name}</span> }\r\n                <span className={style['button-group']}>\r\n                    { isEditing ?\r\n                        <>\r\n                            <button name='save changes' title='Save changes' className={style['icon-item']} onClick={handleSubmit}>\r\n                                <FontAwesomeIcon icon={faCheck} color={iconThemeColor} size='lg' />\r\n                            </button>\r\n                            <button name='cancel' title='Cancel' className={style['icon-item']} onClick={() => setIsEditing(false)}>\r\n                                <FontAwesomeIcon icon={faTimes} color={iconThemeColor} size='lg' />\r\n                            </button>\r\n                        </>\r\n                        :<>\r\n                            { (index > 0 || index < contexts.length - 1) && \r\n                                <>\r\n                                    { index > 0 ? \r\n                                        <button name='move context up' title='Context up' onClick={() => handleReorder('UP')}>\r\n                                            <FontAwesomeIcon icon={faChevronUp} color={iconThemeColor} size='lg' />\r\n                                        </button> : \r\n                                        <button name='move context up' className='disabled' disabled>\r\n                                            <FontAwesomeIcon icon={faChevronUp} color={iconThemeColor} size='lg' />\r\n                                        </button> }\r\n                                    { index < contexts.length - 1 ?\r\n                                        <button name='move context down' title='Context down' onClick={() => handleReorder('DOWN')}>\r\n                                            <FontAwesomeIcon icon={faChevronDown} color={iconThemeColor} size='lg' />\r\n                                        </button> : \r\n                                        <button name='move context down' className='disabled' disabled>\r\n                                            <FontAwesomeIcon icon={faChevronDown} color={iconThemeColor} size='lg' />\r\n                                        </button> }\r\n                                </> }\r\n                            <button name='edit context item' title='Edit context item' onClick={handleEdit}>\r\n                                <FontAwesomeIcon icon={faEdit} color={iconThemeColor} size='lg' />\r\n                            </button>\r\n                            { contexts.length > 1 &&\r\n                            <button name='delete context item' title='Delete context item' onClick={() => handleOpenDeletionModal(context)}>\r\n                                <FontAwesomeIcon icon={faTrash} color={iconThemeColor} size='lg' />\r\n                            </button> }\r\n                        </> }\r\n                </span>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ContextItem\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport iconColors from '../../../iconColors'\r\nimport style from './ManageContexts.module.css'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons'\r\nimport { Context, addContext, deleteContext } from '../../../reducers/contextsReducer'\r\nimport { deleteBlock } from '../../../reducers/blocksReducer'\r\nimport { deleteSubBlock } from '../../../reducers/subBlocksReducer'\r\nimport { addBlock } from '../../../reducers/blocksReducer'\r\nimport { addSubBlock } from '../../../reducers/subBlocksReducer'\r\nimport { updateMode } from '../../../reducers/modeReducer'\r\nimport DeletionModal from '../DeletionModal'\r\nimport ContextItem from './ContextItem'\r\nimport { useCustomSelector } from '../../../store'\r\nimport { v4 as uuidv4 } from 'uuid'\r\n\r\nconst ManageContexts = () => {\r\n    const [modalIsOpen, setModalIsOpen] = useState(false)\r\n    const [focusedContext, setFocusedContext] = useState<Context | null>(null)\r\n    const dispatch = useDispatch()\r\n    const { mode, contexts, blocks, subBlocks } = useCustomSelector(state => state)\r\n\r\n    useEffect(() => {\r\n        document.title = 'Organize - Manage Contexts'\r\n    }, [])\r\n\r\n    const handleAddContext = (): void => {\r\n        const newContextId = uuidv4()\r\n        const newBlockId = uuidv4()\r\n\r\n        dispatch(addContext({\r\n            id: newContextId,\r\n            name: 'New Context',\r\n            blockCount: 1,\r\n            subBlockCount: 1\r\n        }))\r\n        dispatch(addBlock({\r\n            id: newBlockId,\r\n            name: 'New Section',\r\n            context: newContextId,\r\n            subBlockCount: 1\r\n        }))\r\n        dispatch(addSubBlock({\r\n            id: uuidv4(),\r\n            name: 'New Item',\r\n            block: newBlockId,\r\n            contents: '',\r\n            isStriked: false\r\n        }))\r\n    }\r\n\r\n    const handleDeleteContext = (id: string | null): void => {\r\n        // Clear blocks and sub blocks from state before deleting context\r\n        if (id) {\r\n            blocks.forEach(b => {\r\n                if (b.context === id) {\r\n                    subBlocks.forEach(sb => {\r\n                        if (sb.block === b.id) {\r\n                            dispatch(deleteSubBlock({ id: sb.id }))\r\n                        }\r\n                    })\r\n                    dispatch(deleteBlock({ id: b.id}))\r\n                }\r\n            })\r\n            // Check if we're deleting our current context, update context if so\r\n            if (mode.currentContext === id) {\r\n                const newCurrentContext = contexts.find(c => c.id !== id)\r\n                if (newCurrentContext) {\r\n                    dispatch(updateMode({ ...mode, currentContext: newCurrentContext.id as string }))\r\n                }\r\n            }\r\n            dispatch(deleteContext({ id }))\r\n        }\r\n        setModalIsOpen(false)\r\n    }\r\n\r\n    const handleOpenDeletionModal = (context: Context): void => {\r\n        // Set the focused context so the modal knows which to delete\r\n        setFocusedContext(context)\r\n        setModalIsOpen(true)\r\n    }\r\n\r\n    const darkMode = mode.currentTheme === 1\r\n    const iconThemeColor = darkMode ? iconColors.blue['200'] : iconColors.blue['100']\r\n\r\n    return (\r\n        <section>\r\n            { focusedContext && \r\n                <DeletionModal\r\n                    type='CONTEXT'\r\n                    modalIsOpen={modalIsOpen}\r\n                    setModalIsOpen={setModalIsOpen}\r\n                    handleDelete={() => handleDeleteContext(focusedContext.id)}\r\n                    name={focusedContext.name} /> }\r\n            <h1>Manage Contexts</h1>\r\n            <div id={style.container} className={ darkMode ?  style['container-dark'] : style.container }>\r\n                { contexts.map((c, i) => (\r\n                    <ContextItem \r\n                        key={i} \r\n                        context={c}\r\n                        index={i}\r\n                        darkMode={darkMode} \r\n                        iconThemeColor={iconThemeColor}\r\n                        handleOpenDeletionModal={handleOpenDeletionModal} />)) }\r\n            </div>\r\n            <button onClick={handleAddContext} className={style['new-context']}>\r\n                <FontAwesomeIcon icon={faPlus} color={iconThemeColor} />\r\n                {' '} New Context\r\n            </button>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ManageContexts\r\n","import React, { useLayoutEffect, useEffect, useState, useCallback, useRef } from 'react'\r\nimport { useCustomSelector } from '../../../store'\r\nimport TextareaAutosize from 'react-textarea-autosize'\r\nimport style from '../MainContent.module.css'\r\nimport { saveAs } from 'file-saver'\r\nimport { validateAndSetState } from '../../../utils'\r\n\r\n\r\nconst ImportExport = () => {\r\n    const [textareaValue, setTextareaValue] = useState('')\r\n    const [saveButtonDisabled, setSaveButtonDisabled] = useState(true)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    const [updateMessage, setUpdateMessage] = useState('')\r\n    const state = useCustomSelector(state => state)\r\n    const saveButton = useRef<HTMLButtonElement>(null)\r\n\r\n    const darkMode = state.mode.currentTheme === 1\r\n    const importElement: any = document.getElementById('fileInput')\r\n\r\n    useEffect(() => {\r\n        document.title = 'Organize - Import / Export Data'\r\n    }, [])\r\n\r\n    // Enable save button only when changes from state have been made\r\n    useEffect(() => {\r\n        if (textareaValue !== JSON.stringify(state, null, 4)) {\r\n            setSaveButtonDisabled(false)\r\n            if (saveButton.current !== null) {\r\n                saveButton.current.disabled = false\r\n            }\r\n        } else {\r\n            setSaveButtonDisabled(true)\r\n            if (saveButton.current !== null) {\r\n                saveButton.current.disabled = true\r\n            }\r\n        }\r\n    }, [textareaValue, state])\r\n\r\n    // Give the text area our state\r\n    useLayoutEffect(() => {\r\n        setTextareaValue(JSON.stringify(state, null, 4))\r\n    }, [state, setTextareaValue])\r\n\r\n    const handleFiles = useCallback(() => {\r\n        const reader = new FileReader()\r\n        reader.readAsText(importElement.files[0])\r\n\r\n        reader.onload = () => {\r\n            if (typeof reader.result === 'string') {\r\n                setTextareaValue(reader.result)\r\n            }\r\n        }\r\n    }, [importElement])\r\n\r\n    // Check to see if a file was imported\r\n    useEffect(() => {\r\n        if (importElement !== null) {\r\n            importElement.addEventListener('change', handleFiles)\r\n\r\n            return () => importElement.removeEventListener('change', handleFiles)\r\n        }\r\n    }, [importElement, handleFiles])\r\n\r\n    const handleExport = (): void => {\r\n        const currentDate = new Date()\r\n        const day = currentDate.getDate()\r\n        const month = currentDate.getMonth() + 1\r\n        const year = currentDate.getFullYear()\r\n        const dateString = `${month}-${day}-${year}`\r\n\r\n        let blob = new Blob([textareaValue], {\r\n            type: 'text/plain;charset=utf-8'\r\n        })\r\n        saveAs(blob, `organize_data_${dateString}.json`)\r\n    }\r\n\r\n    const handleImport = (): void => {\r\n        if (importElement) {\r\n            importElement.click()\r\n        }\r\n    }\r\n\r\n    const handleTextareaChange = (event: any): void => {\r\n        setTextareaValue(event.target.value)\r\n        if (importElement) {\r\n            importElement.value = ''\r\n        }\r\n        setUpdateMessage('')\r\n    }\r\n\r\n    const handleSaveChanges = (): void => {\r\n        try {\r\n            validateAndSetState(JSON.parse(textareaValue), true)\r\n        } catch (error) {\r\n            let errorMessage = 'Error: '\r\n            const errorTail = ' If you aren\\'t sure how to fix this, refresh the page to discard changes.'\r\n\r\n            if (error instanceof SyntaxError) {\r\n                errorMessage += 'The data you\\'re trying to save isn\\'t formatted correctly.'\r\n            } else {\r\n                errorMessage += `${error.message}.`\r\n            }\r\n            setErrorMessage(errorMessage + errorTail)\r\n            return\r\n        }\r\n        setErrorMessage('')\r\n        setUpdateMessage('Changes successfully saved!')\r\n    }\r\n\r\n    return (\r\n        <section>\r\n            <h1>Import / Export Data</h1>\r\n            { (errorMessage && \r\n                <p className={`message error-message ${darkMode && 'error-message-dark'}`}>\r\n                    {errorMessage}\r\n                </p>) || (updateMessage &&\r\n                <p className={`message update-message ${darkMode && 'update-message-dark'}`}>\r\n                    {updateMessage}\r\n                </p>) }\r\n            <TextareaAutosize \r\n                        className={`${style['edit-mode']} ${darkMode ? `input-dark ${style['edit-mode-dark']}` : ''}`}\r\n                        name='data'\r\n                        title='Data'\r\n                        value={textareaValue}\r\n                        onChange={handleTextareaChange}\r\n                        placeholder='Data' />\r\n            <div id={style['importexport-container']} className={darkMode ? style['bg-dark'] : style['bg-light']}>\r\n                <button\r\n                    name='import'\r\n                    title='Import'\r\n                    className={`choice-button button-neutral bolder ${darkMode && 'button-neutral-dark bolder-dark'}`}\r\n                    onClick={handleImport}>\r\n                    Import\r\n                </button>\r\n                <button \r\n                    name='export'\r\n                    title='Export'\r\n                    className={`choice-button button-neutral bolder ${darkMode && 'button-neutral-dark bolder-dark'}`}\r\n                    onClick={handleExport}>\r\n                    Export\r\n                </button>\r\n                <button \r\n                    name='save changes'\r\n                    title='Save Changes'\r\n                    className={\r\n                        `choice-button button-neutral bolder ${darkMode && 'button-neutral-dark bolder-dark'} ${saveButtonDisabled && 'disabled'}`\r\n                    }\r\n                    ref={saveButton}\r\n                    onClick={handleSaveChanges}>\r\n                    Save Changes\r\n                </button>\r\n            </div>\r\n            <input \r\n                id='fileInput'\r\n                type='file' \r\n                name='import' \r\n                accept='.json' \r\n                style={{ display: 'none' }}\r\n                aria-hidden='true' />\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ImportExport \r\n","import React from 'react'\r\nimport { useCustomSelector } from '../../store'\r\nimport style from './MainContent.module.css'\r\nimport Blocks from './Blocks/Blocks'\r\nimport About from './About/About'\r\nimport ManageContexts from './ManageContexts/ManageContexts'\r\nimport ImportExport from './ImportExport/ImportExport'\r\nimport { Switch, Route } from 'react-router-dom'\r\n\r\nconst MainContent = () => {\r\n    const { mode } = useCustomSelector(state => state)\r\n    const darkMode = mode.currentTheme === 1\r\n\r\n    return (\r\n        <>\r\n            <div className={`${style.separator} ${ darkMode && style['bg-dark']}`} /> <br />\r\n            <main id={style.container} className={darkMode ? 'container-dark' : ''}>\r\n                <Switch>\r\n                    <Route exact path='/'>\r\n                        <Blocks />\r\n                    </Route>\r\n                    <Route path='/about'>\r\n                        <About />\r\n                    </Route>\r\n                    <Route path='/importexport'>\r\n                        <ImportExport />\r\n                    </Route>\r\n                    <Route path='/managecontexts'>\r\n                        <ManageContexts />\r\n                    </Route>\r\n                </Switch>\r\n            </main>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MainContent\r\n","import React, { useLayoutEffect, useEffect, useState, useCallback } from 'react'\nimport './App.css'\nimport { useCustomSelector } from './store'\nimport TopBar from './components/TopBar/TopBar'\nimport Menu from './components/Menu/Menu'\nimport MainContent from './components/MainContent/MainContent'\nimport { HashRouter as Router } from 'react-router-dom'\nimport { validateAndSetState } from './utils'\n\nconst App = () => {\n    const [usingDropdown, setUsingDropdown] = useState(false)\n    const [windowWidth, setWindowWidth] = useState(window.innerWidth)\n    const { mode, contexts, blocks, subBlocks } = useCustomSelector(state => state)\n\n    // Modify body colors according to our theme\n    // Other theme changes are done through the addition of classes within components\n    useLayoutEffect(() => {\n        switch(mode.currentTheme) {\n            case 1: // Dark\n                document.body.style.color = 'white'\n                document.body.style.backgroundColor = '#2d3341'\n                break\n            default: // Light\n                document.body.style.color = '#0E0E2C'\n                document.body.style.backgroundColor = 'white'\n        }\n    }, [mode])\n\n    // Set initial redux state from local storage if it exists\n    useEffect(() => {\n        const modeData = window.localStorage.getItem('mode')\n        const contextsData = window.localStorage.getItem('contexts')\n        const blocksData = window.localStorage.getItem('blocks')\n        const subBlocksData = window.localStorage.getItem('subBlocks')\n\n        if (modeData && contextsData && blocksData && subBlocksData) {\n            const newState = {\n                mode: JSON.parse(modeData),\n                contexts: JSON.parse(contextsData),\n                blocks: JSON.parse(blocksData),\n                subBlocks: JSON.parse(subBlocksData)\n            }\n\n            try {\n                validateAndSetState(newState, false)\n            } catch (error) {\n                console.log(error.message)\n            }\n        }\n    }, [])\n\n    // When redux state updates, update the relevant local storage variable\n    useEffect(() => { window.localStorage.setItem('mode', JSON.stringify(mode)) }, [mode])\n    useEffect(() => { window.localStorage.setItem('contexts', JSON.stringify(contexts)) }, [contexts])\n    useEffect(() => { window.localStorage.setItem('blocks', JSON.stringify(blocks)) }, [blocks])\n    useEffect(() => { window.localStorage.setItem('subBlocks', JSON.stringify(subBlocks)) }, [subBlocks])\n\n    // Deal with window resizing to change layout\n    const handleResize = useCallback((): void => {\n        setWindowWidth(window.innerWidth)\n    }, [])\n\n    useLayoutEffect(() => {\n        if (windowWidth >= 900) {\n            setUsingDropdown(false)\n        } else {\n            setUsingDropdown(true)\n        }\n    }, [windowWidth])\n\n    useEffect(() => {\n        window.addEventListener('resize', handleResize)\n        return () => window.removeEventListener('resize', handleResize)\n    }, [handleResize])\n\n    return (\n        <Router basename='/'>\n            <div>\n                <TopBar usingDropdown={usingDropdown} />\n                <div className={`nav-curv ${mode.currentTheme === 1 && 'nav-curv-dark'}`} />\n                <div id={usingDropdown ? '' : 'no-dropdown_container'}>\n                    <Menu isDropdown={false} usingDropdown={usingDropdown} />\n                    <MainContent />\n                </div>\n            </div>\n        </Router>\n    )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { Provider } from 'react-redux'\nimport store from './store'\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n)\n"],"sourceRoot":""}